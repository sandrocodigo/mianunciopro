<div class="flex items-center justify-between py-4">
    <div>
        <h1 class="titulo" [animate.enter]="'fade-down'"> Nuevo Anuncio </h1>
        <p class="subtitulo" [animate.enter]="'fade-right'">Selecciona la Categoria del Anuncio</p>
    </div>
    <div class="ml-auto">
        <!--         <button [routerLink]="'nuevo'" [animate.enter]="'grow-in'" matFab extended matTooltip="Adicionar" type="button">
            <mat-icon>add</mat-icon> Nuevo
        </button> -->
    </div>
</div>


<div class="flex flex-wrap gap-6 px-4">
    <!-- Formulario -->
    <div
        class="w-full rounded-3xl border border-white/10 bg-slate-900/70 p-8 shadow-2xl shadow-emerald-950/40 backdrop-blur-xl">
        <form *ngIf="registroFormGroup" (ngSubmit)="onSubmit()" [formGroup]="registroFormGroup"
            class="flex flex-col gap-10 text-slate-100">
            <div class="flex flex-wrap items-center justify-between gap-4 border-b border-white/10 pb-6">
                <div class="flex items-center gap-4">
                    <span
                        class="inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-emerald-500/20 text-emerald-300 shadow-lg shadow-emerald-900/40">
                        <span class="material-icons text-2xl">category</span>
                    </span>
                    <div class="space-y-1">
                        <p class="text-xs font-semibold uppercase tracking-[0.3em] text-emerald-200/70">Clasificación</p>
                        <h2 class="text-xl font-semibold">Selecciona la ruta del anuncio</h2>
                        <p class="text-sm text-slate-400">Cada nivel se desbloquea al elegir la categoría anterior, así
                            construyes la jerarquía completa.</p>
                    </div>
                </div>
                <div class="rounded-full border border-white/10 bg-white/5 px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-emerald-200/80">
                    Paso 1 de 3
                </div>
            </div>

            <div class="flex flex-col gap-4 md:flex-row md:flex-wrap md:items-end">
                <mat-form-field class="w-full md:min-w-[220px] md:flex-1">
                    <mat-label>Categoría principal</mat-label>
                    <mat-select formControlName="categoria">
                        @for (item of listaCategorias; track $index) {
                        <mat-option [value]="item.id">{{ item.descripcion }}</mat-option>
                        }
                    </mat-select>
                    @if (registroControl && r.categoria.errors && r.categoria.errors.required) {
                    <mat-error>Se requiere la categoría</mat-error>
                    }
                </mat-form-field>

                @if (listaCategorias1.length) {
                <mat-form-field class="w-full md:min-w-[220px] md:flex-1 transition-all duration-300 ease-out">
                    <mat-label>Subcategoría</mat-label>
                    <mat-select formControlName="categoria1">
                        @for (item of listaCategorias1; track $index) {
                        <mat-option [value]="item.id">{{ item.descripcion }}</mat-option>
                        }
                    </mat-select>
                    @if (registroControl && r.categoria1.errors && r.categoria1.errors.required) {
                    <mat-error>Se requiere la categoría 1</mat-error>
                    }
                </mat-form-field>
                }

                @if (listaCategorias2.length) {
                <mat-form-field class="w-full md:min-w-[220px] md:flex-1 transition-all duration-300 ease-out">
                    <mat-label>Subcategoría avanzada</mat-label>
                    <mat-select formControlName="categoria2">
                        @for (item of listaCategorias2; track $index) {
                        <mat-option [value]="item.id">{{ item.descripcion }}</mat-option>
                        }
                    </mat-select>
                </mat-form-field>
                }

                @if (listaCategorias3.length) {
                <mat-form-field class="w-full md:min-w-[220px] md:flex-1 transition-all duration-300 ease-out">
                    <mat-label>Detalle específico</mat-label>
                    <mat-select formControlName="categoria3">
                        @for (item of listaCategorias3; track $index) {
                        <mat-option [value]="item.id">{{ item.descripcion }}</mat-option>
                        }
                    </mat-select>
                </mat-form-field>
                }
            </div>

            <div class="flex flex-wrap items-center justify-between gap-4 border-t border-white/10 pt-6">
                <div class="text-sm text-slate-400">
                    Completa todos los niveles para que tu anuncio aparezca en las búsquedas más relevantes.
                </div>
                <button color="primary" mat-flat-button type="submit"
                    class="group inline-flex items-center gap-2 rounded-full bg-linear-to-r from-emerald-400 via-emerald-500 to-lime-300 px-6 py-3 text-sm font-semibold text-slate-950 shadow-lg shadow-emerald-900/40 transition hover:-translate-y-0.5 hover:shadow-emerald-800/60">
                    <span>Guardar clasificación</span>
                    <span class="material-icons text-base transition-transform duration-150 group-hover:translate-x-1">check</span>
                </button>
            </div>

        </form>
    </div>
</div>
